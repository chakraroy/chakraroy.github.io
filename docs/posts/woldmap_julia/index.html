<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Chakra Roy">
<meta name="dcterms.date" content="2024-08-30">

<title>Peta Dunia dengan Julia – BlogKu</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">BlogKu</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Peta Dunia dengan Julia</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">references</div>
                <div class="quarto-category">code</div>
                <div class="quarto-category">analysis</div>
                <div class="quarto-category">julia</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Chakra Roy </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">August 30, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p><code>Julia</code> adalah salah satu programming language yang sedang populer saat ini. Julia pandang sebagai salah satu jenis interpreter yang handal karena menggunakan teknik paralel computing yang memungkinkannya mengeksekusi dan mengolah data dalam jumlah besar dengan kecepatan yang jauh melebihi <code>python</code> bahkan di klaim lebih baik dari <code>R</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reticulate)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">use_condaenv</span>(<span class="st">"geopython"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceCode" id="cb2"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Pkg</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="bu">Pkg</span>.<span class="fu">add</span>(<span class="st">"Plots"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="bu">Pkg</span>.<span class="fu">add</span>(<span class="st">"Statistics"</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="bu">Pkg</span>.<span class="fu">add</span>(<span class="st">"DataFrames"</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="bu">Pkg</span>.<span class="fu">add</span>(<span class="st">"Shapefile"</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="bu">Pkg</span>.<span class="fu">add</span>(<span class="st">"Dates"</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="bu">Pkg</span>.<span class="fu">add</span>(<span class="st">"Rasters"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Code di atas adalah cara menginstall package di <code>Julia</code> dengan menggunakan shell pada notebook. Setelah memastikan bahwa paket ini telah terinstall, selanjutnya mulai mengimport packages atau module yang akan digunakan . Untuk memastikan kita memiliki data yang akurat, kita akan menggunakan data dari situs berikut ini: <a href="https://figshare.com/articles/dataset/Harmonization_of_DMSP_and_VIIRS_nighttime_light_data_from_1992-2018_at_the_global_scale/9828827/8" title="https://figshare.com/articles/dataset/Harmonization_of_DMSP_and_VIIRS_nighttime_light_data_from_1992-2018_at_the_global_scale/9828827/8">Harmonize Ningttime Light</a>. Data pada situs ini merupakan data yang biasa digunakan untuk menganalisis persoalan sosial ekonomi dari setiap negara-negara.</p>
<p>Untuk mendemonstrasikan kesamaan dan ke-umuman, kita akan menggunakan data dari: <a href="https://neo.gsfc.nasa.gov/archive/geotiff/MYDAL2_M_AER_OD/" title="https://neo.gsfc.nasa.gov/archive/geotiff/MYDAL2_M_AER_OD/">MODIS Aerosol Optical Depth (AOD)</a> Juga kita akan menggunakan NDVI dari: <a href="https://neo.gsfc.nasa.gov/archive/geotiff/MOD_NDVI_M/" title="https://neo.gsfc.nasa.gov/archive/geotiff/MOD_NDVI_M/">NDVI data NASA</a>. Dan sebagai tambahan kita akan menggunakan shapefile dari: <a href="https://github.com/wri/wri-bounds" title="https://github.com/wri/wri-bounds">Wri Shapefile</a>. Salah satu rujukan kita juga dalam membuat demonstrasi ini adalah berasal dari youtube channel berikut ini: <a href="https://youtu.be/PqWuGsVQdLw" title="https://youtu.be/PqWuGsVQdLw">Geospatial data in Julia with Rasters.jl</a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mengimport module</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Rasters</span>, <span class="bu">Plots</span>, <span class="bu">Statistics</span>, <span class="bu">Shapefile</span>, <span class="bu">DataFrames</span>, <span class="bu">Dates</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Memuat <code>.tif</code> file sebagai raster:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="bu">ArchGDAL</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>path_to_VIIRS <span class="op">=</span> <span class="st">"/Users/chakraroy/Documents/CharObsNote/20_Qmd_Notes/BlogKu/data/Harmonized_DN_NTL_2020_simVIIRS.tif"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>"/Users/chakraroy/Documents/CharObsNote/20_Qmd_Notes/BlogKu/data/Harmonized_DN_NTL_2020_simVIIRS.tif"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>raster <span class="op">=</span> <span class="fu">Raster</span>(path_to_VIIRS, lazy<span class="op">=</span><span class="cn">true</span>, checkmem<span class="op">=</span><span class="cn">false</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>╭─────────────────────────────╮
│ 43201×16801 Raster{UInt8,2} │
├─────────────────────────────┴────────────────────────────────────────── dims ┐
  ↓ X Projected{Float64} LinRange{Float64}(-180.00416666665, 179.99583189335004, 43201) ForwardOrdered Regular Intervals{Start},
  → Y Projected{Float64} LinRange{Float64}(74.99583333334999, -65.00416610665, 16801) ReverseOrdered Regular Intervals{Start}
├──────────────────────────────────────────────────────────────────── metadata ┤
  Metadata{Rasters.GDALsource} of Dict{String, Any} with 4 entries:
  "units"    =&gt; ""
  "offset"   =&gt; 0.0
  "filepath" =&gt; "/Users/chakraroy/Documents/CharObsNote/20_Qmd_Notes/BlogKu/dat…
  "scale"    =&gt; 1.0
├────────────────────────────────────────────────────────────────────── raster ┤
  extent: Extent(X = (-180.00416666665, 180.00416522665003), Y = (-65.00416610665, 75.00416666665))

  crs: GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AXIS["Latitude",NORTH],AXIS["Longitude",EAST],AUTHORITY["EPSG","4326"]]
  filename: 
└──────────────────────────────────────────────────────────────────────────────┘</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(raster)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-nightworld" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-nightworld-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="index_files/figure-html/fig-nightworld-J1.png" class="img-fluid figure-img" width="300">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-nightworld-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: World in Night
</figcaption>
</figure>
</div>
</div>
</div>
<section id="indexing" class="level2">
<h2 class="anchored" data-anchor-id="indexing">Indexing</h2>
<p>Index dengan kolom dan nomor baris. Karena raster yang digunakan adalah single band, index band-nya akan selalu sama dengan 1.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>raster[<span class="fl">10</span>, <span class="fl">10</span>, <span class="fl">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0x00</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>raster[<span class="fl">1000</span>, <span class="fl">1000</span>, <span class="fl">1</span>] <span class="op">|&gt;</span> <span class="dt">Int</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0</code></pre>
</div>
</div>
<p>Indexing dengan <code>logitude</code> dan <code>latitude</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>raster[<span class="fu">X</span>(<span class="fu">Near</span>(<span class="fl">77.1025</span>)), <span class="fu">Y</span>(<span class="fu">Near</span>(<span class="fl">28.7041</span>))]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0x3f</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>raster[<span class="fu">X</span>(<span class="fu">Near</span>(<span class="fl">77.1025</span>)), <span class="fu">Y</span>(<span class="fu">Near</span>(<span class="fl">28.7041</span>))] <span class="op">|&gt;</span> <span class="dt">Int</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>63</code></pre>
</div>
</div>
</section>
<section id="shapefiles" class="level2">
<h2 class="anchored" data-anchor-id="shapefiles">Shapefiles</h2>
<p>Kita akan melakukan pengolahan spahefile untuk analisis, croping maupun statistik. Kita akan menggunakan shapefile dari: <a href="https://github.com/wri/wri-bounds" class="uri">https://github.com/wri/wri-bounds</a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>shp <span class="op">=</span> Shapefile.<span class="fu">Table</span>(<span class="st">"/Users/chakraroy/Documents/CharObsNote/20_Qmd_Notes/BlogKu/data/world_shapefile/in_primary_countries.shp"</span>) <span class="op">|&gt;</span> DataFrame</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>193×29 DataFrame
 Row │ geometry               ADM0_A3  abbrev   continent      formal_nam      ⋯
     │ Polygon                String?  String?  String?        String?         ⋯
─────┼──────────────────────────────────────────────────────────────────────────
   1 │ Polygon(1530 Points)   AFG      Afg.     Asia           Islamic State o ⋯
   2 │ Polygon(1642 Points)   AGO      Ang.     Africa         People's Republ
   3 │ Polygon(554 Points)    ALB      Alb.     Europe         Republic of Alb
   4 │ Polygon(51 Points)     AND      And.     Europe         Principality of
   5 │ Polygon(796 Points)    ARE      U.A.E.   Asia           United Arab Emi ⋯
   6 │ Polygon(4696 Points)   ARG      Arg.     South America  Argentine Repub
   7 │ Polygon(433 Points)    ARM      Arm.     Asia           Republic of Arm
   8 │ Polygon(108 Points)    ATG      Ant.B.   North America  Antigua and Bar
  ⋮  │           ⋮               ⋮        ⋮           ⋮                        ⋱
 187 │ Polygon(4166 Points)   VNM      Viet.    Asia           Socialist Repub ⋯
 188 │ Polygon(1015 Points)   VUT      Van.     Oceania        Republic of Van
 189 │ Polygon(132 Points)    WSM      Samoa    Oceania        Independent Sta
 190 │ Polygon(1027 Points)   YEM      Yem.     Asia           Republic of Yem
 191 │ Polygon(2207 Points)   ZAF      S.Af.    Africa         Republic of Sou ⋯
 192 │ Polygon(1508 Points)   ZMB      Zambia   Africa         Republic of Zam
 193 │ Polygon(766 Points)    ZWE      Zimb.    Africa         Republic of Zim
                                                 25 columns and 178 rows omitted</code></pre>
</div>
</div>
<p>Untuk membersihkan datanya, kita bisa melakukan remove setiap non complit data atau data yang hilang (missing data)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>shp <span class="op">=</span> <span class="fu">dropmissing</span>(shp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>192×29 DataFrame
 Row │ geometry               ADM0_A3  abbrev   continent      formal_nam      ⋯
     │ Polygon                String   String   String         String          ⋯
─────┼──────────────────────────────────────────────────────────────────────────
   1 │ Polygon(1530 Points)   AFG      Afg.     Asia           Islamic State o ⋯
   2 │ Polygon(1642 Points)   AGO      Ang.     Africa         People's Republ
   3 │ Polygon(554 Points)    ALB      Alb.     Europe         Republic of Alb
   4 │ Polygon(51 Points)     AND      And.     Europe         Principality of
   5 │ Polygon(796 Points)    ARE      U.A.E.   Asia           United Arab Emi ⋯
   6 │ Polygon(4696 Points)   ARG      Arg.     South America  Argentine Repub
   7 │ Polygon(433 Points)    ARM      Arm.     Asia           Republic of Arm
   8 │ Polygon(108 Points)    ATG      Ant.B.   North America  Antigua and Bar
  ⋮  │           ⋮               ⋮        ⋮           ⋮                        ⋱
 186 │ Polygon(4166 Points)   VNM      Viet.    Asia           Socialist Repub ⋯
 187 │ Polygon(1015 Points)   VUT      Van.     Oceania        Republic of Van
 188 │ Polygon(132 Points)    WSM      Samoa    Oceania        Independent Sta
 189 │ Polygon(1027 Points)   YEM      Yem.     Asia           Republic of Yem
 190 │ Polygon(2207 Points)   ZAF      S.Af.    Africa         Republic of Sou ⋯
 191 │ Polygon(1508 Points)   ZMB      Zambia   Africa         Republic of Zam
 192 │ Polygon(766 Points)    ZWE      Zimb.    Africa         Republic of Zim
                                                 25 columns and 177 rows omitted</code></pre>
</div>
</div>
<p>kemudian kita bisa visualisasikan datanya dalam peta</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(shp.geometry)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-11-J1.png" class="img-fluid figure-img" width="300"></p>
</figure>
</div>
</div>
</div>
<p>Kita bisa memilih negara atau polygon yang ingin kita tampilkan dengan operasi <code>findall</code> :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>japan_index <span class="op">=</span> <span class="fu">findall</span>(x <span class="op">-&gt;</span> x <span class="op">==</span> <span class="st">"Japan"</span>, shp.name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1-element Vector{Int64}:
 87</code></pre>
</div>
</div>
<p>Visualisasi polygon dari wilayah atau negara yang dipilih</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(shp.geometry[japan_index])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-13-J1.png" class="img-fluid figure-img" width="300"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="cropping" class="level2">
<h2 class="anchored" data-anchor-id="cropping">Cropping</h2>
<p>Terdapat 2 cara untuk cropping, sebagaimana selanjutnya di bawah ini.</p>
<section id="cropping-dengan-shapes" class="level3">
<h3 class="anchored" data-anchor-id="cropping-dengan-shapes">Cropping dengan Shapes</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>japan <span class="op">=</span> <span class="fu">crop</span>(raster; to <span class="op">=</span> shp.geometry[japan_index])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>╭───────────────────────────╮
│ 3724×2556 Raster{UInt8,2} │
├───────────────────────────┴──────────────────────────────────────────── dims ┐
  ↓ X Projected{Float64} LinRange{Float64}(122.94583212155003, 153.97083199745006, 3724) ForwardOrdered Regular Intervals{Start},
  → Y Projected{Float64} LinRange{Float64}(45.50416678465, 24.212500203149993, 2556) ReverseOrdered Regular Intervals{Start}
├──────────────────────────────────────────────────────────────────── metadata ┤
  Metadata{Rasters.GDALsource} of Dict{String, Any} with 4 entries:
  "units"    =&gt; ""
  "offset"   =&gt; 0.0
  "filepath" =&gt; "/Users/chakraroy/Documents/CharObsNote/20_Qmd_Notes/BlogKu/dat…
  "scale"    =&gt; 1.0
├────────────────────────────────────────────────────────────────────── raster ┤
  extent: Extent(X = (122.94583212155003, 153.97916533075005), Y = (24.212500203149993, 45.512500117950005))

  crs: GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AXIS["Latitude",NORTH],AXIS["Longitude",EAST],AUTHORITY["EPSG","4326"]]
  filename: 
└──────────────────────────────────────────────────────────────────────────────┘</code></pre>
</div>
</div>
<p>Kita akan mendapatkan raster baru, dan kita plot seperti di bawah ini:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(japan)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-15-J1.png" class="img-fluid figure-img" width="300"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="crop-dengan-bounds" class="level3">
<h3 class="anchored" data-anchor-id="crop-dengan-bounds">Crop dengan Bounds</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>bounds <span class="op">=</span> <span class="fu">X</span>(Rasters.<span class="fu">Between</span>(<span class="fl">65.39</span>, <span class="fl">99.94</span>)), <span class="fu">Y</span>(Rasters.<span class="fu">Between</span>(<span class="fl">5.34</span>, <span class="fl">39.27</span>)) <span class="co">#bounding box</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>↓ X Between((65.39, 99.94)), → Y Between((5.34, 39.27))</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>raster[bounds<span class="op">...</span>] <span class="op">|&gt;</span> plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-16-J1.png" class="img-fluid figure-img" width="300"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="masking" class="level2">
<h2 class="anchored" data-anchor-id="masking">Masking</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>japan_masked <span class="op">=</span> <span class="fu">mask</span>(japan, with <span class="op">=</span> shp.geometry[japan_index])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>╭───────────────────────────────────────────╮
│ 3724×2556 Raster{Union{Missing, UInt8},2} │
├───────────────────────────────────────────┴──────────────────────────── dims ┐
  ↓ X Projected{Float64} LinRange{Float64}(122.94583212155003, 153.97083199745006, 3724) ForwardOrdered Regular Intervals{Start},
  → Y Projected{Float64} LinRange{Float64}(45.50416678465, 24.212500203149993, 2556) ReverseOrdered Regular Intervals{Start}
├──────────────────────────────────────────────────────────────────── metadata ┤
  Metadata{Rasters.GDALsource} of Dict{String, Any} with 4 entries:
  "units"    =&gt; ""
  "offset"   =&gt; 0.0
  "filepath" =&gt; "/Users/chakraroy/Documents/CharObsNote/20_Qmd_Notes/BlogKu/dat…
  "scale"    =&gt; 1.0
├────────────────────────────────────────────────────────────────────── raster ┤
  extent: Extent(X = (122.94583212155003, 153.97916533075005), Y = (24.212500203149993, 45.512500117950005))
  missingval: missing
  crs: GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AXIS["Latitude",NORTH],AXIS["Longitude",EAST],AUTHORITY["EPSG","4326"]]
└──────────────────────────────────────────────────────────────────────────────┘
   ↓ →    45.5042    45.4958    45.4875    …  24.2292    24.2208    24.2125
 122.946    missing    missing    missing       missing    missing    missing
   ⋮                                       ⋱              ⋮         
 153.971    missing    missing    missing       missing    missing    missing</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(japan_masked)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-18-J1.png" class="img-fluid figure-img" width="300"></p>
</figure>
</div>
</div>
</div>
<p>Menghitung summary statistics</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">skipmissing</span>(japan_masked)) <span class="op">|&gt;</span> <span class="dt">Int</span> <span class="op">|&gt;</span> println</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>6244738</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">skipmissing</span>(japan_masked)) <span class="op">|&gt;</span> <span class="dt">Float32</span> <span class="op">|&gt;</span> println</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>11.361134</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(<span class="fu">skipmissing</span>(japan_masked)) <span class="op">|&gt;</span> <span class="dt">Int</span> <span class="op">|&gt;</span> println</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>7</code></pre>
</div>
</div>
</section>
<section id="zonal-statistics" class="level2">
<h2 class="anchored" data-anchor-id="zonal-statistics">Zonal Statistics</h2>
<p>Menghitung summary statistics untuk seluruh zone</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>sol_by_country <span class="op">=</span> <span class="fu">zonal</span>(sum, raster; of<span class="op">=</span>shp.geometry)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>192-element Vector{Union{Missing, UInt64}}:
 0x000000000007fd02
 0x00000000003394fd
 0x000000000005542c
 0x00000000000040cb
 0x00000000001846bc
 0x0000000000942949
 0x0000000000037332
 0x000000000000251f
 0x0000000000611fe2
 0x00000000000e2ef9
                  ⋮
 0x0000000000000db5
 0x00000000003e0548
 0x000000000032bbee
 0x000000000000183c
 0x00000000000017fe
 0x00000000000a5fa4
 0x000000000060328a
 0x000000000021abee
 0x00000000000ba825</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>shp.sol <span class="op">=</span> <span class="fu">Int</span>.(sol_by_country);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(shp, <span class="op">:</span>sol, rev<span class="op">=</span><span class="cn">true</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>192×30 DataFrame
 Row │ geometry               ADM0_A3  abbrev   continent                forma ⋯
     │ Polygon                String   String   String                   Strin ⋯
─────┼──────────────────────────────────────────────────────────────────────────
   1 │ Polygon(36018 Points)  USA      U.S.A.   North America            Unite ⋯
   2 │ Polygon(14262 Points)  CHN      China    Asia                     Peopl
   3 │ Polygon(36331 Points)  RUS      Rus.     Europe                   Russi
   4 │ Polygon(8542 Points)   IND      India    Asia                     Repub
   5 │ Polygon(11116 Points)  BRA      Brazil   South America            Feder ⋯
   6 │ Polygon(68156 Points)  CAN      Can.     North America            Canad
   7 │ Polygon(2726 Points)   IRN      Iran     Asia                     Islam
   8 │ Polygon(3640 Points)   TUR      Tur.     Asia                     Repub
  ⋮  │           ⋮               ⋮        ⋮                ⋮                   ⋱
 186 │ Polygon(254 Points)    FSM      F.S.M.   Oceania                  Feder ⋯
 187 │ Polygon(12 Points)     MCO      Mco.     Europe                   Princ
 188 │ Polygon(9 Points)      NRU      Nauru    Oceania                  Repub
 189 │ Polygon(709 Points)    KIR      Kir.     Oceania                  Repub
 190 │ Polygon(1418 Points)   MDV      Mald.    Seven seas (open ocean)  Repub ⋯
 191 │ Polygon(69 Points)     TUV      Tuv.     Oceania                  Tuval
 192 │ Polygon(211 Points)    MHL      M. Is.   Oceania                  Repub
                                                 26 columns and 177 rows omitted</code></pre>
</div>
</div>
</section>
<section id="datacubes" class="level2">
<h2 class="anchored" data-anchor-id="datacubes">Datacubes</h2>
<p>Menggabungkan gambar-gambar untuk membentuk data cube</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>path <span class="op">=</span> <span class="st">"/Users/chakraroy/Documents/CharObsNote/20_Qmd_Notes/BlogKu/data/MODISAQ/"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>"/Users/chakraroy/Documents/CharObsNote/20_Qmd_Notes/BlogKu/data/MODISAQ/"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>filelist <span class="op">=</span><span class="fu">readdir</span>(path)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>24-element Vector{String}:
 "MYDAL2_M_AER_OD_2020-01.tiff"
 "MYDAL2_M_AER_OD_2020-02.tiff"
 "MYDAL2_M_AER_OD_2020-03.tiff"
 "MYDAL2_M_AER_OD_2020-04.tiff"
 "MYDAL2_M_AER_OD_2020-05.tiff"
 "MYDAL2_M_AER_OD_2020-06.tiff"
 "MYDAL2_M_AER_OD_2020-07.tiff"
 "MYDAL2_M_AER_OD_2020-08.tiff"
 "MYDAL2_M_AER_OD_2020-09.tiff"
 "MYDAL2_M_AER_OD_2020-10.tiff"
 ⋮
 "MYDAL2_M_AER_OD_2021-04.tiff"
 "MYDAL2_M_AER_OD_2021-05.tiff"
 "MYDAL2_M_AER_OD_2021-06.tiff"
 "MYDAL2_M_AER_OD_2021-07.tiff"
 "MYDAL2_M_AER_OD_2021-08.tiff"
 "MYDAL2_M_AER_OD_2021-09.tiff"
 "MYDAL2_M_AER_OD_2021-10.tiff"
 "MYDAL2_M_AER_OD_2021-11.tiff"
 "MYDAL2_M_AER_OD_2021-12.tiff"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>dates <span class="op">=</span> <span class="fu">collect</span>(<span class="fu">Date</span>(<span class="fl">2020</span>,<span class="fl">1</span>)<span class="op">:</span><span class="fu">Month</span>(<span class="fl">1</span>)<span class="op">:</span><span class="fu">Date</span>(<span class="fl">2021</span>, <span class="fl">12</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>24-element Vector{Date}:
 2020-01-01
 2020-02-01
 2020-03-01
 2020-04-01
 2020-05-01
 2020-06-01
 2020-07-01
 2020-08-01
 2020-09-01
 2020-10-01
 ⋮
 2021-04-01
 2021-05-01
 2021-06-01
 2021-07-01
 2021-08-01
 2021-09-01
 2021-10-01
 2021-11-01
 2021-12-01</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>bounds <span class="op">=</span> <span class="fu">X</span>(Rasters.<span class="fu">Between</span>(<span class="fl">65.39</span>, <span class="fl">99.94</span>)), <span class="fu">Y</span>(Rasters.<span class="fu">Between</span>(<span class="fl">5.34</span>, <span class="fl">39.27</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>↓ X Between((65.39, 99.94)), → Y Between((5.34, 39.27))</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>aod_raster_list <span class="op">=</span> [<span class="fu">Raster</span>(i, lazy <span class="op">=</span> <span class="cn">true</span>)[bounds<span class="op">...</span>] for i <span class="kw">in</span> path <span class="op">.*</span> filelist]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>24-element Vector{Raster{UInt8, 2, Tuple{X{Projected{Float64, LinRange{Float64, Int64}, DimensionalData.Dimensions.Lookups.ForwardOrdered, DimensionalData.Dimensions.Lookups.Regular{Float64}, DimensionalData.Dimensions.Lookups.Intervals{DimensionalData.Dimensions.Lookups.Start}, DimensionalData.Dimensions.Lookups.NoMetadata, WellKnownText{GeoFormatTypes.CRS}, Nothing, X{Colon}}}, Y{Projected{Float64, LinRange{Float64, Int64}, DimensionalData.Dimensions.Lookups.ReverseOrdered, DimensionalData.Dimensions.Lookups.Regular{Float64}, DimensionalData.Dimensions.Lookups.Intervals{DimensionalData.Dimensions.Lookups.Start}, DimensionalData.Dimensions.Lookups.NoMetadata, WellKnownText{GeoFormatTypes.CRS}, Nothing, Y{Colon}}}}, Tuple{Band{DimensionalData.Dimensions.Lookups.Categorical{Int64, UnitRange{Int64}, DimensionalData.Dimensions.Lookups.ForwardOrdered, DimensionalData.Dimensions.Lookups.NoMetadata}}}, Matrix{UInt8}, Symbol, DimensionalData.Dimensions.Lookups.Metadata{Rasters.GDALsource, Dict{String, Any}}, UInt8}}:
 UInt8[0x2f 0x2a … 0x3a 0x3e; 0x2e 0x25 … 0x3d 0x43; … ; 0xff 0xff … 0x33 0x39; 0xff 0xff … 0x35 0x3b]
 UInt8[0x22 0x22 … 0x3d 0x47; 0x21 0x20 … 0x3c 0x45; … ; 0x38 0x6c … 0x2d 0x2f; 0x3d 0x79 … 0x2d 0x34]
 UInt8[0x3b 0x2d … 0x40 0x37; 0x4c 0x2a … 0x41 0x40; … ; 0x0d 0xff … 0x43 0x44; 0x0c 0x0d … 0x47 0x4a]
 UInt8[0x36 0x61 … 0x2f 0x35; 0x3f 0x56 … 0x2d 0x36; … ; 0x3d 0x43 … 0x3a 0x36; 0x44 0x3a … 0x30 0x3a]
 UInt8[0x2f 0x28 … 0x32 0x31; 0x2e 0x3a … 0x35 0x30; … ; 0x0f 0x0e … 0x16 0x15; 0x0f 0x0f … 0x17 0x16]
 UInt8[0x27 0x2a … 0x2b 0x36; 0x26 0x28 … 0x2c 0x24; … ; 0x0f 0x0e … 0x22 0x24; 0x0d 0x0e … 0x20 0x26]
 UInt8[0x25 0x39 … 0x33 0x32; 0x22 0x3e … 0x32 0x31; … ; 0x0f 0x1b … 0x40 0x42; 0x0e 0x16 … 0x33 0x40]
 UInt8[0xff 0x50 … 0xff 0xff; 0xff 0x58 … 0xff 0xff; … ; 0x1d 0xff … 0xff 0xff; 0x13 0xff … 0xff 0xff]
 UInt8[0x21 0x2b … 0xff 0x24; 0x26 0x3a … 0xff 0x23; … ; 0x1a 0x14 … 0x13 0xff; 0x2f 0x0e … 0x14 0xff]
 UInt8[0x26 0x29 … 0x22 0x25; 0x26 0x2b … 0x22 0x22; … ; 0x10 0x0d … 0x23 0x25; 0x0f 0x0e … 0x27 0x27]
 ⋮
 UInt8[0x7d 0x37 … 0x35 0x2c; 0x71 0x4b … 0x35 0x2e; … ; 0x89 0xeb … 0x41 0x3f; 0x85 0x13 … 0x39 0x38]
 UInt8[0x47 0x30 … 0x50 0x31; 0x3b 0x37 … 0x33 0x44; … ; 0x24 0x2f … 0x27 0x27; 0x23 0x2c … 0x27 0x2d]
 UInt8[0xff 0xff … 0xff 0xff; 0xff 0xff … 0xff 0xff; … ; 0xff 0xff … 0xff 0xff; 0xff 0xff … 0xff 0xff]
 UInt8[0x5e 0x56 … 0x23 0x1f; 0x5b 0x6a … 0x23 0x1f; … ; 0x0f 0x1a … 0x43 0x42; 0x12 0x11 … 0x3f 0x40]
 UInt8[0x43 0x53 … 0x29 0x44; 0x42 0x56 … 0x45 0x42; … ; 0x12 0x16 … 0xff 0xff; 0x0f 0x0f … 0xff 0xff]
 UInt8[0x4b 0x3b … 0x1b 0x1b; 0x3f 0x44 … 0x1a 0x1a; … ; 0x16 0x12 … 0x2f 0x2c; 0x14 0x0e … 0x2c 0x29]
 UInt8[0x43 0x36 … 0x2b 0x2c; 0x41 0x35 … 0x2a 0x29; … ; 0x19 0x10 … 0x1e 0x1c; 0x12 0x13 … 0x1f 0x19]
 UInt8[0x44 0x44 … 0x33 0x2b; 0x45 0x40 … 0x28 0x2a; … ; 0x0e 0x0d … 0xff 0xff; 0x0d 0x0b … 0xff 0xff]
 UInt8[0x44 0x34 … 0x25 0x2e; 0x44 0x34 … 0x24 0x2a; … ; 0xff 0xff … 0x2a 0x27; 0xff 0xff … 0x2a 0x29]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>timestamps <span class="op">=</span> <span class="fu">collect</span>(<span class="fl">1</span><span class="op">:</span><span class="fu">length</span>(aod_raster_list))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>24-element Vector{Int64}:
  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
  ⋮
 16
 17
 18
 19
 20
 21
 22
 23
 24</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>aod_series <span class="op">=</span> <span class="fu">RasterSeries</span>(aod_raster_list, <span class="fu">Ti</span>(timestamps))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>╭───────────────────────────────────╮
│ 24-element RasterSeries{Raster,1} │
├───────────────────────────────────┴───────────────────────────── dims ┐
  ↓ Ti Sampled{Int64} [1, 2, …, 23, 24] ForwardOrdered Irregular Points
├─────────────────────────────────────────────────────────────── raster ┤
  extent: Extent(X = (65.4, 99.89999999999999), Y = (5.400000000000006, 39.20000000000001))
  missingval: 0x00
  crs: GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AXIS["Latitude",NORTH],AXIS["Longitude",EAST],AUTHORITY["EPSG","4326"]]
└───────────────────────────────────────────────────────────────────────┘
  1  …  UInt8[0x2f 0x2a … 0x3a 0x3e; 0x2e 0x25 … 0x3d 0x43; … ; 0xff 0xff … 0x33 0x39; 0xff 0xff … 0x35 0x3b]
  2     UInt8[0x22 0x22 … 0x3d 0x47; 0x21 0x20 … 0x3c 0x45; … ; 0x38 0x6c … 0x2d 0x2f; 0x3d 0x79 … 0x2d 0x34]
  3     UInt8[0x3b 0x2d … 0x40 0x37; 0x4c 0x2a … 0x41 0x40; … ; 0x0d 0xff … 0x43 0x44; 0x0c 0x0d … 0x47 0x4a]
  4     UInt8[0x36 0x61 … 0x2f 0x35; 0x3f 0x56 … 0x2d 0x36; … ; 0x3d 0x43 … 0x3a 0x36; 0x44 0x3a … 0x30 0x3a]
  5     UInt8[0x2f 0x28 … 0x32 0x31; 0x2e 0x3a … 0x35 0x30; … ; 0x0f 0x0e … 0x16 0x15; 0x0f 0x0f … 0x17 0x16]
  6  …  UInt8[0x27 0x2a … 0x2b 0x36; 0x26 0x28 … 0x2c 0x24; … ; 0x0f 0x0e … 0x22 0x24; 0x0d 0x0e … 0x20 0x26]
  ⋮  ⋱  
 20     UInt8[0x43 0x53 … 0x29 0x44; 0x42 0x56 … 0x45 0x42; … ; 0x12 0x16 … 0xff 0xff; 0x0f 0x0f … 0xff 0xff]
 21  …  UInt8[0x4b 0x3b … 0x1b 0x1b; 0x3f 0x44 … 0x1a 0x1a; … ; 0x16 0x12 … 0x2f 0x2c; 0x14 0x0e … 0x2c 0x29]
 22     UInt8[0x43 0x36 … 0x2b 0x2c; 0x41 0x35 … 0x2a 0x29; … ; 0x19 0x10 … 0x1e 0x1c; 0x12 0x13 … 0x1f 0x19]
 23     UInt8[0x44 0x44 … 0x33 0x2b; 0x45 0x40 … 0x28 0x2a; … ; 0x0e 0x0d … 0xff 0xff; 0x0d 0x0b … 0xff 0xff]
 24     UInt8[0x44 0x34 … 0x25 0x2e; 0x44 0x34 … 0x24 0x2a; … ; 0xff 0xff … 0x2a 0x27; 0xff 0xff … 0x2a 0x29]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>aod_datacube <span class="op">=</span> Rasters.<span class="fu">combine</span>(aod_series, Ti)[bounds<span class="op">...</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>╭────────────────────────────╮
│ 345×338×24 Raster{UInt8,3} │
├────────────────────────────┴─────────────────────────────────────────── dims ┐
  ↓ X  Projected{Float64} LinRange{Float64}(65.4, 99.8, 345) ForwardOrdered Regular Intervals{Start},
  → Y  Projected{Float64} LinRange{Float64}(39.10000000000001, 5.400000000000006, 338) ReverseOrdered Regular Intervals{Start},
  ↗ Ti Sampled{Int64} [1, 2, …, 23, 24] ForwardOrdered Irregular Points
├──────────────────────────────────────────────────────────────────── metadata ┤
  Metadata{Rasters.GDALsource} of Dict{String, Any} with 4 entries:
  "units"    =&gt; ""
  "offset"   =&gt; 0.0
  "filepath" =&gt; "/Users/chakraroy/Documents/CharObsNote/20_Qmd_Notes/BlogKu/dat…
  "scale"    =&gt; 1.0
├────────────────────────────────────────────────────────────────────── raster ┤
  extent: Extent(X = (65.4, 99.89999999999999), Y = (5.400000000000006, 39.20000000000001), Ti = (1, 24))
  missingval: 0x00
  crs: GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AXIS["Latitude",NORTH],AXIS["Longitude",EAST],AUTHORITY["EPSG","4326"]]
└──────────────────────────────────────────────────────────────────────────────┘
[:, :, 1]
  ↓ →    39.1    39.0    38.9    38.8  …     5.7     5.6     5.5     5.4
  ⋮                                    ⋱     ⋮                    
 99.8  0xff    0xff    0xff    0xff    …  0x33    0x2d    0x35    0x3b</code></pre>
</div>
</div>
<p>Plot datacube</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">view</span>(aod_datacube,  <span class="fu">Ti</span>(<span class="fl">1</span>)) <span class="op">|&gt;</span> plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-24-J1.png" class="img-fluid figure-img" width="300"></p>
</figure>
</div>
</div>
</div>
<p>Menemukan time series untuk sebuah pixel yang ditentukan</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>aod_datacube[<span class="fu">X</span>(<span class="fu">Near</span>(<span class="fl">77.1025</span>)), <span class="fu">Y</span>(<span class="fu">Near</span>(<span class="fl">28.7041</span>))] <span class="op">|&gt;</span> plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-25-J1.png" class="img-fluid figure-img" width="300"></p>
</figure>
</div>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/chakraroy\.github\.io\/BlogKu\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>